<div class="relative rounded-2xl h-[65%] sm:h-[61%] w-full overflow-hidden" (mouseenter)="onHover()"
     (mouseleave)="onHoverOut()">

  <img
    [src]="currentImgPath()"
    [alt]="product().title"
    class="w-full h-full object-cover transition-transform duration-1000 ease-in-out"
    [class.scale-105]="isZoomed()"
    [class.scale-100]="!isZoomed()"
  />


  @if (product().discountPercentage && product().discountPercentage !== 0) {
    <p class="absolute top-2.5 left-2.5 bg-rose-400 rounded-xl text-white text-xs py-0.5 px-2">
      -{{ product().discountPercentage | number : '1.0-0' }}%
    </p>
  }

  <div
    class="absolute bottom-2/5 left-1/5 w-3/5 justify-around opacity-0 scale-90 pointer-events-none
         group-hover:opacity-100 group-hover:scale-100 group-hover:pointer-events-auto
         transition-all duration-500 ease-out flex"
    (click)="toggleMobileActions()"
    [class.opacity-100]="showMobileActions()"
    [class.scale-100]="showMobileActions()"
    [class.pointer-events-auto]="showMobileActions()"
  >

    <div
      (mouseenter)="showQuickTooltip.set(true)"
      (mouseleave)="showQuickTooltip.set(false)"
    >
      <p class="btn-control relative">
        <i class="bi bi-eye text-lg"></i>

        @if (showQuickTooltip()) {
          <app-tooltip
            text="Quick view"
            [show]="showQuickTooltip()"
            position="top"
          />
        }
      </p>
    </div>

    <div
      (mouseenter)="showShareTooltip.set(true)"
      (mouseleave)="showShareTooltip.set(false)"
    >
      <p class="btn-control relative">
        <i class="bi bi-share text-lg"></i>

        @if (showShareTooltip()) {
          <app-tooltip
            text="Share"
            [show]="showShareTooltip()"
            position="top"
          />
        }
      </p>
    </div>

    <div
      (mouseenter)="showWishListTooltip.set(true)"
      (mouseleave)="showWishListTooltip.set(false)"
    >
      <p class="btn-control relative">
        <i class="bi bi-suit-heart text-lg"></i>

        @if (showWishListTooltip()) {
          <app-tooltip
            text="Add To Wishlist"
            [show]="showWishListTooltip()"
            position="top"
          />
        }
      </p>
    </div>

  </div>

</div>

<div class="relative bg-white h-[36%] sm:h-[39%] w-full py-3 px-2 flex flex-col space-y-0.5 justify-center"
     (mouseenter)="onHover()"
     (mouseleave)="onHoverOut()">
  <p class="text-gray-700 opacity-85 font-extralight text-xs line-clamp-1">{{ product().category }}</p>

  <h2
    class="text-black hover:text-primary-green duration-300 transition-colors text-lg font-semibold line-clamp-1">
    {{ product().title }}
  </h2>

  <div class="space-x-1 flex items-center">
    <i class="bi bi-star text-yellow-400 text-xs cursor-default"></i>
    <i class="bi bi-star text-yellow-400 text-xs cursor-default"></i>
    <i class="bi bi-star text-yellow-400 text-xs cursor-default"></i>
    <i class="bi bi-star text-yellow-400 text-xs cursor-default"></i>
    <i class="bi bi-star text-yellow-400 text-xs cursor-default"></i>
    <p class="ml-2 text-sm text-gray-700 cursor-text">{{ product().ratingPercentage }}%</p>
  </div>

  <div class="space-x-3 mt-1 flex items-center">
    <h2 class="text-primary-green text-lg font-semibold cursor-text truncate max-w-1/2">${{
        discountedPrice() | number : '1.2-2'
      }}</h2>

    @if (product().price !== discountedPrice()) {
      <p class="line-through text-gray-700 text-sm cursor-text truncate max-w-1/2">
        ${{ product().price | number : '1.2-2' }}
      </p>
    }
  </div>

  <!-- ðŸ›’ CART ICON WITH TOOLTIP -->
  <div
    class="absolute bottom-2.5 right-2.5"
    (mouseenter)="showCartTooltip.set(true)"
    (mouseleave)="showCartTooltip.set(false)"
  >
    <p class="btn-control relative">
      <i class="bi bi-bag-plus text-lg"></i>

      @if (showCartTooltip()) {
        <app-tooltip
          [text]="'Add to Cart'"
          [show]="showCartTooltip()"
          position="top"
        />
      }
    </p>
  </div>

</div>

